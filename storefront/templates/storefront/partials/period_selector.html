<div class="period-selector d-inline-block">
    <label for="periodSelect" class="visually-hidden">Period</label>
    <select id="periodSelect" class="form-select form-select-sm" onchange="__applyPeriod(this.value)" style="min-width:140px; background:var(--card-bg); color:var(--text-primary); border:1px solid var(--border-color);">
        <option value="24h" {% if period == '24h' %}selected{% endif %}>24 hours</option>
        <option value="7d" {% if period == '7d' %}selected{% endif %}>7 days</option>
        <option value="30d" {% if period == '30d' %}selected{% endif %}>30 days</option>
        <option value="90d" {% if period == '90d' %}selected{% endif %}>3 months</option>
        <option value="180d" {% if period == '180d' %}selected{% endif %}>6 months</option>
        <option value="365d" {% if period == '365d' %}selected{% endif %}>12 months</option>
        <option value="all" {% if period == 'all' %}selected{% endif %}>All time</option>
    </select>
</div>
<script>
    // Replace or set the period query param and reload (preserves existing query params)
    function __applyPeriod(val) {
        try {
            var params = new URLSearchParams(window.location.search);
            params.set('period', val);
            var hash = window.location.hash || '';
            window.location.href = window.location.pathname + (params.toString() ? ('?' + params.toString()) : '') + hash;
        } catch (e) {
            window.location.search = '?period=' + encodeURIComponent(val);
        }
    }
</script>
